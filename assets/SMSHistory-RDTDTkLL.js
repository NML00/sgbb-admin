import{_ as R,a as U,c as k,b,d as A,e as y,f as E,k as I,g as j,h as q,i as O,j as z}from"./PaginationPrev.vue_vue_type_script_setup_true_lang-BTeLRq-C.js";import{_ as K}from"./TableCaption.vue_vue_type_script_setup_true_lang-BNaN2nSA.js";import{d as G,r as V,t as L,A as J,p,w as a,C as v,o as d,b as l,f as n,g as t,v as C,e as s,_ as F,q as T,c as $,n as B,D as f,H as Q,F as x}from"./index-CXxdqnxq.js";const W={class:"mt-4 bg-card text-card-foreground p-2 rounded"},X={class:"text-xl flex gap-2 items-center"},Y={class:"basis-full sm:basis-1/2 md:basis-1/3 px-1"},Z={class:"basis-full sm:basis-1/2 md:basis-1/3 px-1"},ee={class:"mt-4"},se={class:"border rounded"},ae={class:"sm:hidden"},le="user/history/sms",ue=G({__name:"SMSHistory",setup(te){const r=V({page:1,limit:10,userId:"",phone:"",type:""}),D=L(()=>{const i=new URLSearchParams(r.value),e=[];return i.forEach((m,h)=>{(m===void 0||m==="undefined"||m==="")&&e.push(h)}),e.forEach(m=>{i.delete(m)}),`${le}?${i.toString()}`}),{data:H,isFetching:S}=J(D,{refetch:!0}).json(),c=L(()=>{var i;return(i=H.value)==null?void 0:i.metaData}),g=V(!0);return(i,e)=>{const m=v("CardTitle"),h=v("CardHeader"),M=v("Icon"),N=v("CardContent"),P=v("Card");return d(),p(P,{class:""},{default:a(()=>[l(h,null,{default:a(()=>[l(m,null,{default:a(()=>e[4]||(e[4]=[n(" Lịch sử SMS ")])),_:1})]),_:1}),l(N,null,{default:a(()=>[t("div",W,[t("div",X,[e[5]||(e[5]=n(" Bộ lọc ")),t("button",{onClick:e[0]||(e[0]=o=>g.value=!g.value),class:"hover:bg-accent/50 active:bg-accent rounded p-1"},[l(M,{name:"Triangle",class:C([{"rotate-180":!g.value},"w-[0.75em] h-[0.75em]"])},null,8,["class"])])]),t("div",{class:C([{hidden:!g.value},"flex flex-wrap items-center transition -mx-1"])},[t("div",Y,[t("label",null,[e[6]||(e[6]=n(" Số điện thoại ")),l(s(F),{modelValue:r.value.phone,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.phone=o),placeholder:"Số điện thoại (e.g. 09012222222)"},null,8,["modelValue"])])]),t("div",Z,[t("label",null,[e[7]||(e[7]=n(" Loại ")),l(s(F),{modelValue:r.value.type,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.type=o),class:"uppercase",placeholder:"Loại OTP"},null,8,["modelValue"])])])],2)]),t("div",ee,[t("div",se,[l(s(R),{class:"",loading:s(S)},{default:a(()=>[l(s(K),null,{default:a(()=>e[8]||(e[8]=[t("div",null,"Đây là các lệnh SMS trong hệ thống",-1)])),_:1}),l(s(U),null,{default:a(()=>[l(s(k),null,{default:a(()=>[l(s(b),null,{default:a(()=>e[9]||(e[9]=[n(" Số Điện thoại "),t("span",{class:"sm:hidden"}," / Loại",-1)])),_:1}),l(s(b),null,{default:a(()=>e[10]||(e[10]=[n(" Mã OTP ")])),_:1}),l(s(b),{class:"hidden sm:table-cell"},{default:a(()=>e[11]||(e[11]=[n(" Loại ")])),_:1}),l(s(b),null,{default:a(()=>e[12]||(e[12]=[n(" Ngày tạo ")])),_:1})]),_:1})]),_:1}),c.value?(d(),p(s(A),{key:0},{default:a(()=>{var o;return[(d(!0),$(x,null,B((o=c.value)==null?void 0:o.results,u=>(d(),p(s(k),{key:u.id,class:"odd:bg-muted"},{default:a(()=>[l(s(y),null,{default:a(()=>[n(f(u.phone)+" ",1),t("div",ae,f(u.type),1)]),_:2},1024),l(s(y),null,{default:a(()=>[n(f(u.otp),1)]),_:2},1024),l(s(y),{class:"hidden sm:table-cell"},{default:a(()=>[n(f(u.type),1)]),_:2},1024),l(s(y),null,{default:a(()=>[n(f(s(Q).format(new Date(u.createdAt))),1)]),_:2},1024)]),_:2},1024))),128))]}),_:1})):T("",!0)]),_:1},8,["loading"])]),c.value?(d(),p(s(E),{key:0,class:"mt-4","items-per-page":c.value.limit,total:c.value.totalResults,"show-edges":"",page:r.value.page,"onUpdate:page":e[3]||(e[3]=o=>r.value.page=o),disabled:s(S)},{default:a(({page:o})=>[l(s(I),{class:"flex items-center gap-1"},{default:a(({items:u})=>[l(s(j),{class:"w-6 h-6"}),(d(!0),$(x,null,B(u,(_,w)=>(d(),$(x,null,[_.type==="page"?(d(),p(s(q),{key:w,value:_.value,"as-child":""},{default:a(()=>[t("button",{class:C(["w-6 h-6 p-0 hover:bg-primary/50 cursor-pointer rounded",{"bg-primary text-primary-foreground":_.value===o}])},f(_.value),3)]),_:2},1032,["value"])):(d(),p(s(O),{key:_.type,index:w},null,8,["index"]))],64))),256)),l(s(z),{class:"w-6 h-6"})]),_:2},1024)]),_:1},8,["items-per-page","total","page","disabled"])):T("",!0)])]),_:1})]),_:1})}}});export{ue as default};
//# sourceMappingURL=SMSHistory-RDTDTkLL.js.map
