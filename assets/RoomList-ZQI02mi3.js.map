{"version":3,"file":"RoomList-ZQI02mi3.js","sources":["../../src/components/user/ListOfAvatars.vue","../../src/components/user/ApproveRoom.vue","../../src/components/user/RejectRoom.vue","../../src/views/dashboard/user/RoomList.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { User } from '@/stores/user'\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\nimport MaleIcon from '../icons/MaleIcon.vue'\nimport FemaleIcon from '../icons/FemaleIcon.vue'\nimport type { MinimizeMember } from '@/stores/room';\n\nconst props = defineProps<{ list: MinimizeMember[] }>()\n</script>\n\n<template>\n  <div class=\"flex flex-row-reverse w-fit\">\n    <div\n      v-for=\"member in props.list\"\n      :key=\"member._id\"\n      class=\"w-[1rem] overflow-visible flex justify-start\"\n    >\n      <Avatar>\n        <AvatarImage\n          class=\"max-w-none rounded-full border border-border !w-auto aspect-square left-0\"\n          :src=\"props.list[0].avatarPath\"\n        >\n        </AvatarImage>\n        <AvatarFallback> User </AvatarFallback>\n      </Avatar>\n    </div>\n  </div>\n  <Dialog>\n    <DialogTrigger> </DialogTrigger>\n    <DialogContent>\n      <DialogHeader>\n        <DialogTitle> Danh sách người dùng </DialogTitle>\n      </DialogHeader>\n      <div>\n        <div v-for=\"member in props.list\" :key=\"member._id\" class=\"flex gap-2 py-1\">\n          <div>\n            <Avatar>\n              <AvatarImage\n                class=\"max-w-none rounded-full border border-border !w-auto aspect-square left-0\"\n                :src=\"member.avatarPath\"\n              >\n              </AvatarImage>\n              <AvatarFallback> User </AvatarFallback>\n            </Avatar>\n          </div>\n          <div>\n            <div>\n              {{ member.nickname }}\n              <span\n                class=\"inline\"\n                :class=\"{\n                  'text-blue-600': member.gender === 'male',\n                  'text-pink-600': member.gender === 'female'\n                }\"\n              >\n                {{ member.gender === 'male' ? MaleIcon : FemaleIcon }}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DialogContent>\n  </Dialog>\n</template>\n","<script setup lang=\"ts\">\nimport { useMyFetch } from '@/config/fetch'\nimport type { Room } from '@/stores/room'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger\n} from '@/components/ui/alert-dialog'\nconst props = defineProps<{ room: Room }>()\n\nconst { patch } = useMyFetch(`/rooms/${props.room._id}/approve`, { immediate: false })\nconst emit = defineEmits<{ update: [] }>()\nconst handleclick = async () => {\n  const { data, execute } = patch().json()\n  await execute()\n  if (data.value.status) {\n    emit('update')\n    console.log('Aint nothing but a heartache')\n  }\n}\n</script>\n\n<template>\n  <AlertDialog>\n    <AlertDialogTrigger>\n      <slot />\n    </AlertDialogTrigger>\n    <AlertDialogContent>\n      <AlertDialogHeader>\n        <AlertDialogTitle> Xác nhận yêu cầu Matching </AlertDialogTitle>\n        <AlertDialogDescription>\n          {{ room.name }}\n        </AlertDialogDescription>\n      </AlertDialogHeader>\n      <AlertDialogAction @click=\"handleclick\">Tiếp tục</AlertDialogAction>\n      <AlertDialogCancel>Hủy</AlertDialogCancel>\n    </AlertDialogContent>\n  </AlertDialog>\n</template>\n","<script setup lang=\"ts\">\nimport { useMyFetch } from '@/config/fetch'\nimport type { Room } from '@/stores/room'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger\n} from '@/components/ui/alert-dialog'\nconst props = defineProps<{ room: Room }>()\n\nconst { patch } = useMyFetch(`/rooms/${props.room._id}/reject`, { immediate: false })\nconst emit = defineEmits<{ update: [] }>()\nconst handleclick = async () => {\n  const { data, execute } = patch().json()\n  await execute()\n  if (data.value.status) {\n    emit('update')\n  }\n}\n</script>\n\n<template>\n  <AlertDialog>\n    <AlertDialogTrigger>\n      <slot />\n    </AlertDialogTrigger>\n    <AlertDialogContent>\n      <AlertDialogHeader>\n        <AlertDialogTitle> Từ chối yêu cầu Matching </AlertDialogTitle>\n        <AlertDialogDescription>\n          {{ room.name }}\n        </AlertDialogDescription>\n      </AlertDialogHeader>\n      <AlertDialogAction @click=\"handleclick\">Tiếp tục</AlertDialogAction>\n      <AlertDialogCancel>Hủy</AlertDialogCancel>\n    </AlertDialogContent>\n  </AlertDialog>\n</template>\n","<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport {\n  Table,\n  TableBody,\n  TableCaption,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow\n} from '@/components/ui/table'\n\nimport {\n  Pagination,\n  PaginationEllipsis,\n  PaginationList,\n  PaginationListItem,\n  PaginationNext,\n  PaginationPrev\n} from '@/components/ui/pagination'\n\nimport { computed, ref } from 'vue'\nimport { formateDate, myDateFormatter, truncateNumber } from '@/lib/utils'\nimport { useAuthStore } from '@/stores/auth'\nimport { useMyFetch, type ListData, type Response } from '@/config/fetch'\nimport type { BalanceOrder } from '@/stores/balance'\nimport type { Room } from '@/stores/room'\nimport ListOfAvatars from '@/components/user/ListOfAvatars.vue'\nimport ApproveRoom from '@/components/user/ApproveRoom.vue'\nimport RejectRoom from '@/components/user/RejectRoom.vue'\n\nconst balanceParams = ref({\n  page: 1,\n  limit: 10,\n  userId: ''\n})\nconst apiRoute = '/rooms'\nconst fullApiRoute = computed(() => {\n  const query = new URLSearchParams(balanceParams.value as any)\n  const delKeys: Array<string> = []\n  query.forEach((value, key) => {\n    if (value === undefined || value === 'undefined' || value === '') {\n      delKeys.push(key)\n    }\n  })\n  delKeys.forEach((el) => {\n    query.delete(el)\n  })\n\n  return `${apiRoute}?${query.toString()}`\n})\n\nconst { data, isFetching: pending } = useMyFetch(fullApiRoute, { refetch: true }).json<\n  Response<ListData<Room>>\n>()\nconst roomList = computed(() => {\n  return data.value?.metaData\n})\n</script>\n\n<template>\n  <Card class=\"\">\n    <CardHeader>\n      <CardTitle> Các phòng chat </CardTitle>\n    </CardHeader>\n    <CardContent>\n      <div class=\"mt-4\">\n        <div class=\"border rounded\">\n          <Table class=\"\" :loading=\"pending\">\n            <TableCaption>\n              <div>Đây là các phòng chat trong hệ thống</div>\n            </TableCaption>\n            <TableHeader>\n              <TableRow>\n                <TableHead> Tên phòng </TableHead>\n                <TableHead> Trạng thái xác nhận </TableHead>\n                <TableHead> Ngày tạo </TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody v-if=\"roomList\">\n              <TableRow\n                v-for=\"entry in roomList?.results\"\n                :key=\"entry._id\"\n                class=\"odd:bg-(--color-background-mute)\"\n              >\n                <TableCell>\n                  {{ entry.name }}\n                  <div>\n                    <ListOfAvatars :list=\"entry.memberDetails\" />\n                  </div>\n                </TableCell>\n                <TableCell>\n                  <div class=\"flex gap-2\">\n                    {{ entry.isApproved ? 'Đã xác nhận' : 'Chưa xác nhận' }}\n                    <template v-if=\"!entry.isApproved\">\n                      <ApproveRoom :room=\"entry\" class=\"text-primary\">\n                        <Icon name=\"Check\" />\n                      </ApproveRoom>\n                      <RejectRoom :room=\"entry\">\n                        <Icon class=\"text-destructive\" name=\"X\" />\n                      </RejectRoom>\n                    </template>\n                  </div>\n                </TableCell>\n                <TableCell>\n                  {{ myDateFormatter.format(new Date(entry.createdAt)) }}\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </div>\n        <Pagination\n          v-if=\"roomList\"\n          class=\"mt-4\"\n          v-slot=\"{ page }\"\n          :items-per-page=\"roomList.limit\"\n          :total=\"roomList.totalResults\"\n          show-edges\n          v-model:page=\"balanceParams.page\"\n          :disabled=\"pending\"\n        >\n          <PaginationList v-slot=\"{ items }\" class=\"flex items-center gap-1\">\n            <PaginationPrev class=\"w-6 h-6\"></PaginationPrev>\n            <template v-for=\"(item, index) in items\">\n              <PaginationListItem\n                v-if=\"item.type === 'page'\"\n                :key=\"index\"\n                :value=\"item.value\"\n                as-child\n              >\n                <button\n                  class=\"w-6 h-6 p-0 hover:bg-primary/50 cursor-pointer rounded\"\n                  :class=\"{\n                    'bg-primary text-primary-foreground': item.value === page\n                  }\"\n                >\n                  {{ item.value }}\n                </button>\n              </PaginationListItem>\n              <PaginationEllipsis v-else :key=\"item.type\" :index=\"index\" />\n            </template>\n            <PaginationNext class=\"w-6 h-6\"></PaginationNext>\n          </PaginationList>\n        </Pagination>\n      </div>\n    </CardContent>\n  </Card>\n</template>\n"],"names":["props","__props","patch","useMyFetch","emit","__emit","handleclick","data","execute","apiRoute","balanceParams","ref","fullApiRoute","computed","query","delKeys","value","key","el","pending","roomList","_a"],"mappings":"iwBAOA,MAAMA,EAAQC,ixCCOd,MAAMD,EAAQC,EAER,CAAE,MAAAC,CAAU,EAAAC,EAAW,UAAUH,EAAM,KAAK,GAAG,WAAY,CAAE,UAAW,EAAA,CAAO,EAC/EI,EAAOC,EACPC,EAAc,SAAY,CAC9B,KAAM,CAAE,KAAAC,EAAM,QAAAC,CAAY,EAAAN,EAAA,EAAQ,KAAK,EACvC,MAAMM,EAAQ,EACVD,EAAK,MAAM,SACbH,EAAK,QAAQ,EACb,QAAQ,IAAI,8BAA8B,EAE9C,qhBCXA,MAAMJ,EAAQC,EAER,CAAE,MAAAC,CAAU,EAAAC,EAAW,UAAUH,EAAM,KAAK,GAAG,UAAW,CAAE,UAAW,EAAA,CAAO,EAC9EI,EAAOC,EACPC,EAAc,SAAY,CAC9B,KAAM,CAAE,KAAAC,EAAM,QAAAC,CAAY,EAAAN,EAAA,EAAQ,KAAK,EACvC,MAAMM,EAAQ,EACVD,EAAK,MAAM,QACbH,EAAK,QAAQ,CAEjB,6gBCYMK,GAAW,0CALjB,MAAMC,EAAgBC,GAAI,CACxB,KAAM,EACN,MAAO,GACP,OAAQ,EAAA,CACT,EAEKC,EAAeC,EAAS,IAAM,CAClC,MAAMC,EAAQ,IAAI,gBAAgBJ,EAAc,KAAY,EACtDK,EAAyB,CAAC,EAC1B,OAAAD,EAAA,QAAQ,CAACE,EAAOC,IAAQ,EACxBD,IAAU,QAAaA,IAAU,aAAeA,IAAU,KAC5DD,EAAQ,KAAKE,CAAG,CAClB,CACD,EACOF,EAAA,QAASG,GAAO,CACtBJ,EAAM,OAAOI,CAAE,CAAA,CAChB,EAEM,GAAGT,EAAQ,IAAIK,EAAM,SAAU,CAAA,EAAA,CACvC,EAEK,CAAE,KAAAP,EAAM,WAAYY,GAAYhB,EAAWS,EAAc,CAAE,QAAS,EAAM,CAAA,EAAE,KAEhF,EACIQ,EAAWP,EAAS,IAAM,OAC9B,OAAOQ,EAAAd,EAAK,QAAL,YAAAc,EAAY,QAAA,CACpB"}