import{_ as G,a as K,c as H,b as M,d as J,e as N,f as O,k as Q,g as W,h as Y,i as Z,j as ee}from"./PaginationPrev.vue_vue_type_script_setup_true_lang-B0XJAtII.js";import{_ as te}from"./TableCaption.vue_vue_type_script_setup_true_lang-CdLERt2K.js";import{d as A,A as T,p,o as l,e,w as a,b as t,y as I,f as u,D as k,t as y,g as _,c as C,q as j,F as R,n as B,v as E,E as ae,G as se,r as ne,C as D,H as le}from"./index-BztDu3CB.js";import{_ as oe}from"./ListOfAvatars.vue_vue_type_script_setup_true_lang-FLUDm1oa.js";import{_ as L,a as S,b as P,c as V,d as q,e as U,g as X,f as z}from"./AlertDialogTrigger.vue_vue_type_script_setup_true_lang-De1o0p4i.js";import{_ as ue,a as re,d as ie,b as de,c as _e}from"./DialogContent.vue_vue_type_script_setup_true_lang-BMiq7JTv.js";import{_ as me}from"./AvatarFallback.vue_vue_type_script_setup_true_lang-CUWwidPO.js";import"./FemaleIcon-CoNBwiLm.js";const ce=A({__name:"ApproveRoom",props:{room:{}},emits:["update"],setup(b,{emit:m}){const g=b,{patch:h}=T(`/rooms/${g.room._id}/approve`,{immediate:!1}),$=m,r=async()=>{const{data:n,execute:s}=h().json();await s(),n.value.status&&($("update"),console.log("Aint nothing but a heartache"))};return(n,s)=>(l(),p(e(L),null,{default:a(()=>[t(e(S),null,{default:a(()=>[I(n.$slots,"default")]),_:3}),t(e(P),null,{default:a(()=>[t(e(V),null,{default:a(()=>[t(e(q),null,{default:a(()=>s[0]||(s[0]=[u(" Xác nhận yêu cầu Matching ")])),_:1}),t(e(U),null,{default:a(()=>[u(k(n.room.name),1)]),_:1})]),_:1}),t(e(X),{onClick:r},{default:a(()=>s[1]||(s[1]=[u("Tiếp tục")])),_:1}),t(e(z),null,{default:a(()=>s[2]||(s[2]=[u("Hủy")])),_:1})]),_:1})]),_:3}))}}),fe=A({__name:"RejectRoom",props:{room:{}},emits:["update"],setup(b,{emit:m}){const g=b,{patch:h}=T(`/rooms/${g.room._id}/reject`,{immediate:!1}),$=m,r=async()=>{const{data:n,execute:s}=h().json();await s(),n.value.status&&$("update")};return(n,s)=>(l(),p(e(L),null,{default:a(()=>[t(e(S),null,{default:a(()=>[I(n.$slots,"default")]),_:3}),t(e(P),null,{default:a(()=>[t(e(V),null,{default:a(()=>[t(e(q),null,{default:a(()=>s[0]||(s[0]=[u(" Từ chối yêu cầu Matching ")])),_:1}),t(e(U),null,{default:a(()=>[u(k(n.room.name),1)]),_:1})]),_:1}),t(e(X),{onClick:r},{default:a(()=>s[1]||(s[1]=[u("Tiếp tục")])),_:1}),t(e(z),null,{default:a(()=>s[2]||(s[2]=[u("Hủy")])),_:1})]),_:1})]),_:3}))}}),pe={key:0,class:"h-[400px] overflow-auto px-2 relative inset-shadow-sm"},ve={class:"shrink-0 h-10 w-10"},$e={class:"grow bg-muted p-1 rounded"},ge=A({__name:"RoomMessageBox",props:{room:{}},setup(b){const m=b,g=y(()=>`messages/${m.room._id}/conversation`),{data:h,execute:$}=T(g,{immediate:!1}).json(),r=y(()=>{var o;return(o=h.value)==null?void 0:o.metaData}),n=y(()=>{const o=new Map;return m.room.memberDetails.forEach(d=>{o.set(d._id,d)}),o}),s=(o,d)=>r.value&&(o===0||n.value.get(r.value.results[o-1].sender)!==n.value.get(d.sender)),v=y(()=>{const o=n.value.entries().next().value;return o?o[1]._id:""});return(o,d)=>(l(),p(e(ue),null,{default:a(()=>[t(e(re),null,{default:a(()=>[_("button",{onClick:d[0]||(d[0]=w=>e($)())},"Xem tin nhắn")]),_:1}),t(e(ie),null,{default:a(()=>{var w;return[t(e(de),null,{default:a(()=>[t(e(_e))]),_:1}),_("div",null,[r.value?(l(),C("div",pe,[(l(!0),C(R,null,B((w=r.value)==null?void 0:w.results,(c,f)=>(l(),C("div",{key:`${f}${c.content}`,class:E({"pt-4":s(f,c)})},[_("div",{class:E(["flex gap-2 pt-1",{"flex-row-reverse":v.value===c.sender}])},[_("div",ve,[c.sender&&n.value.get(c.sender)&&s(f,c)?(l(),p(e(ae),{key:0,class:"self-start"},{default:a(()=>{var i;return[t(e(se),{src:((i=n.value.get(c.sender))==null?void 0:i.avatarPath)??""},null,8,["src"]),t(e(me))]}),_:2},1024)):j("",!0)]),_("div",$e,k(c.content),1),d[1]||(d[1]=_("div",{class:"shrink-0 h-10 w-10"},null,-1))],2)],2))),128))])):j("",!0)])]}),_:1})]),_:1}))}}),he={class:"mt-4"},ke={class:"border rounded"},Ce={class:"flex gap-2"},be="/rooms",Me=A({__name:"RoomList",setup(b){const m=ne({page:1,limit:10,userId:""}),g=y(()=>{const n=new URLSearchParams(m.value),s=[];return n.forEach((v,o)=>{(v===void 0||v==="undefined"||v==="")&&s.push(o)}),s.forEach(v=>{n.delete(v)}),`${be}?${n.toString()}`}),{data:h,isFetching:$}=T(g,{refetch:!0}).json(),r=y(()=>{var n;return(n=h.value)==null?void 0:n.metaData});return(n,s)=>{const v=D("CardTitle"),o=D("CardHeader"),d=D("Icon"),w=D("CardContent"),c=D("Card");return l(),p(c,{class:""},{default:a(()=>[t(o,null,{default:a(()=>[t(v,null,{default:a(()=>s[1]||(s[1]=[u(" Các phòng chat ")])),_:1})]),_:1}),t(w,null,{default:a(()=>[_("div",he,[_("div",ke,[t(e(G),{class:"",loading:e($)},{default:a(()=>[t(e(te),null,{default:a(()=>s[2]||(s[2]=[_("div",null,"Đây là các phòng chat trong hệ thống",-1)])),_:1}),t(e(K),null,{default:a(()=>[t(e(H),null,{default:a(()=>[t(e(M),null,{default:a(()=>s[3]||(s[3]=[u(" Tên phòng ")])),_:1}),t(e(M),null,{default:a(()=>s[4]||(s[4]=[u(" Trạng thái xác nhận ")])),_:1}),t(e(M),null,{default:a(()=>s[5]||(s[5]=[u(" Ngày tạo ")])),_:1})]),_:1})]),_:1}),r.value?(l(),p(e(J),{key:0},{default:a(()=>{var f;return[(l(!0),C(R,null,B((f=r.value)==null?void 0:f.results,i=>(l(),p(e(H),{key:i._id,class:"odd:bg-(--color-background-mute)"},{default:a(()=>[t(e(N),null,{default:a(()=>[u(k(i.name)+" ",1),_("div",null,[t(oe,{list:i.memberDetails},null,8,["list"])]),t(ge,{room:i},null,8,["room"])]),_:2},1024),t(e(N),null,{default:a(()=>[_("div",Ce,[u(k(i.isApproved?"Đã xác nhận":"Chưa xác nhận")+" ",1),i.isApproved?j("",!0):(l(),C(R,{key:0},[t(ce,{room:i,class:"text-primary"},{default:a(()=>[t(d,{name:"Check"})]),_:2},1032,["room"]),t(fe,{room:i},{default:a(()=>[t(d,{class:"text-destructive",name:"X"})]),_:2},1032,["room"])],64))])]),_:2},1024),t(e(N),null,{default:a(()=>[u(k(e(le).format(new Date(i.createdAt))),1)]),_:2},1024)]),_:2},1024))),128))]}),_:1})):j("",!0)]),_:1},8,["loading"])]),r.value?(l(),p(e(O),{key:0,class:"mt-4","items-per-page":r.value.limit,total:r.value.totalResults,"show-edges":"",page:m.value.page,"onUpdate:page":s[0]||(s[0]=f=>m.value.page=f),disabled:e($)},{default:a(({page:f})=>[t(e(Q),{class:"flex items-center gap-1"},{default:a(({items:i})=>[t(e(W),{class:"w-6 h-6"}),(l(!0),C(R,null,B(i,(x,F)=>(l(),C(R,null,[x.type==="page"?(l(),p(e(Y),{key:F,value:x.value,"as-child":""},{default:a(()=>[_("button",{class:E(["w-6 h-6 p-0 hover:bg-primary/50 cursor-pointer rounded",{"bg-primary text-primary-foreground":x.value===f}])},k(x.value),3)]),_:2},1032,["value"])):(l(),p(e(Z),{key:x.type,index:F},null,8,["index"]))],64))),256)),t(e(ee),{class:"w-6 h-6"})]),_:2},1024)]),_:1},8,["items-per-page","total","page","disabled"])):j("",!0)])]),_:1})]),_:1})}}});export{Me as default};
//# sourceMappingURL=RoomList-B7ZDOmP9.js.map
