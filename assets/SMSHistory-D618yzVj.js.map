{"version":3,"file":"SMSHistory-D618yzVj.js","sources":["../../src/views/dashboard/user/SMSHistory.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport {\n  Table,\n  TableBody,\n  TableCaption,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow\n} from '@/components/ui/table'\n\nimport {\n  Pagination,\n  PaginationEllipsis,\n  PaginationList,\n  PaginationListItem,\n  PaginationNext,\n  PaginationPrev\n} from '@/components/ui/pagination'\n\nimport { computed, ref } from 'vue'\nimport { formateDate, myDateFormatter, truncateNumber } from '@/lib/utils'\nimport { useAuthStore } from '@/stores/auth'\nimport { useMyFetch, type ListData, type Response } from '@/config/fetch'\nimport type { BalanceOrder } from '@/stores/balance'\n\nexport type SMS = {\n  phone: string\n  type: string\n  timestamps: number\n  status: boolean\n  createdAt: string\n  id: string\n}\n\nconst balanceParams = ref({\n  page: 1,\n  limit: 10,\n  userId: ''\n})\nconst apiRoute = 'user/history/sms'\nconst fullApiRoute = computed(() => {\n  const query = new URLSearchParams(balanceParams.value as any)\n  const delKeys: Array<string> = []\n  query.forEach((value, key) => {\n    if (value === undefined || value === 'undefined' || value === '') {\n      delKeys.push(key)\n    }\n  })\n  delKeys.forEach((el) => {\n    query.delete(el)\n  })\n\n  return `${apiRoute}?${query.toString()}`\n})\n\nconst { data, isFetching: pending } = useMyFetch(fullApiRoute, { refetch: true }).json<\n  Response<ListData<SMS>>\n>()\nconst smsHistory = computed(() => {\n  return data.value?.metaData\n})\n</script>\n\n<template>\n  <Card class=\"\">\n    <CardHeader>\n      <CardTitle> Lịch sử SMS </CardTitle>\n    </CardHeader>\n    <CardContent>\n      <div class=\"mt-4\">\n        <div class=\"border rounded\">\n          <Table class=\"\" :loading=\"pending\">\n            <TableCaption>\n              <div>Đây là các lệnh SMS trong hệ thống</div>\n            </TableCaption>\n            <TableHeader>\n              <TableRow>\n                <TableHead> Số Điện thoại </TableHead>\n                <TableHead> Loại </TableHead>\n                <TableHead> Ngày tạo </TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody v-if=\"smsHistory\">\n              <TableRow\n                v-for=\"entry in smsHistory?.results\"\n                :key=\"entry.id\"\n                class=\"odd:bg-(--color-background-mute)\"\n              >\n                <TableCell>\n                  {{ entry.phone }}\n                </TableCell>\n                <TableCell>\n                  {{ entry.type }}\n                </TableCell>\n                <TableCell>\n                  {{ myDateFormatter.format(new Date(entry.createdAt)) }}\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </div>\n        <Pagination\n          v-if=\"smsHistory\"\n          class=\"mt-4\"\n          v-slot=\"{ page }\"\n          :items-per-page=\"smsHistory.limit\"\n          :total=\"smsHistory.totalResults\"\n          show-edges\n          v-model:page=\"balanceParams.page\"\n          :disabled=\"pending\"\n        >\n          <PaginationList v-slot=\"{ items }\" class=\"flex items-center gap-1\">\n            <PaginationPrev class=\"w-6 h-6\"></PaginationPrev>\n            <template v-for=\"(item, index) in items\">\n              <PaginationListItem\n                v-if=\"item.type === 'page'\"\n                :key=\"index\"\n                :value=\"item.value\"\n                as-child\n              >\n                <button\n                  class=\"w-6 h-6 p-0 hover:bg-primary/50 cursor-pointer rounded\"\n                  :class=\"{\n                    'bg-primary text-primary-foreground': item.value === page\n                  }\"\n                >\n                  {{ item.value }}\n                </button>\n              </PaginationListItem>\n              <PaginationEllipsis v-else :key=\"item.type\" :index=\"index\" />\n            </template>\n            <PaginationNext class=\"w-6 h-6\"></PaginationNext>\n          </PaginationList>\n        </Pagination>\n      </div>\n    </CardContent>\n  </Card>\n</template>\n"],"names":["apiRoute","balanceParams","ref","fullApiRoute","computed","query","delKeys","value","key","el","data","pending","useMyFetch","smsHistory","_a"],"mappings":"mcAyCMA,EAAW,sDALjB,MAAMC,EAAgBC,EAAI,CACxB,KAAM,EACN,MAAO,GACP,OAAQ,EAAA,CACT,EAEKC,EAAeC,EAAS,IAAM,CAClC,MAAMC,EAAQ,IAAI,gBAAgBJ,EAAc,KAAY,EACtDK,EAAyB,CAAC,EAC1B,OAAAD,EAAA,QAAQ,CAACE,EAAOC,IAAQ,EACxBD,IAAU,QAAaA,IAAU,aAAeA,IAAU,KAC5DD,EAAQ,KAAKE,CAAG,CAClB,CACD,EACOF,EAAA,QAASG,GAAO,CACtBJ,EAAM,OAAOI,CAAE,CAAA,CAChB,EAEM,GAAGT,CAAQ,IAAIK,EAAM,SAAU,CAAA,EAAA,CACvC,EAEK,CAAE,KAAAK,EAAM,WAAYC,GAAYC,EAAWT,EAAc,CAAE,QAAS,EAAM,CAAA,EAAE,KAEhF,EACIU,EAAaT,EAAS,IAAM,OAChC,OAAOU,EAAAJ,EAAK,QAAL,YAAAI,EAAY,QAAA,CACpB"}